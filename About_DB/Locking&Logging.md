## Locking & Logging

#### (트랜잭션에서 이어서...)

이러한 ACID 원칙을 지키기 위해 DBMS는 트랜잭션 지원 모듈을 제공함.
동시성 제어 : 원자성과 지속성이 이에 해당, locking을 통해 구현.
회복 : 고립성과 일관성이 이에 해당, logging을 통해 구현.

### Logging

Logging을 통해 트랜잭션의 커밋 혹은 롤백 상황에서 DB 안정성과 회복을 보장함.

로그 전용 DB를 통해

- **정상 커밋 시,** 로그를 통한 REDO (Roll Forward)
- **장애 발생 시,** 로그를 통한 역순차적 UNDO (Roll back)

이에 추가적으로 트랜잭션 중간 체크포인트를 두어 장애 발생 시, 트랜잭션 간 충돌 시 커밋이나 롤백의 기점을 추가적으로 둚으로써 시스템 부하를 줄여줌.

### Locking

Locking을 통해 각 트랜잭션 간 충돌로 인한 데이터 무결성 문제를 방지함.
Locking은 **공유락, 독점락**으로 나눌 수 있으며,

- 읽기 기능(SELECT)는 공유락,
- 쓰기 기능(UPDATE, INSERT)는 독점락이 적용됨.

**공유락의 경우** 다른 공유락과 동시 처리가 가능함. -> DB가 수정될 일이 없기 때문에 데이터 무결성 문제 발생 염려가 없음. (다수의 사용자가 동시에 읽기 트랜잭션 처리가 가능함)

**독점락의 경우** ‘로킹 범위’에 한해 추가적 락 생성 불가 -> DB가 수정될 수 있기 때문에 이에 대한 다른 트랜잭션의 접근을 봉쇄. (각 트랜잭션은 하나 씩 처리됨)

\+ 로킹 범위를 테이블 전체로 한다면 트랜잭션 처리 지연이 심해질 수 있기 때문에 적절한 로킹 범위 설정이 필요 (보통 행 단위의 독점락 설정)
